package com.putable.tilenet.Util;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import com.putable.tilenet.Client.Client;
import com.putable.tilenet.Server.ServerModel;

public class Driver {
	//((c4.1.1.3)) A port can have the range 44456-44459
	private static final int PORT = 44457;
	private static final int MAX_CONNECTIONS = 1;
	private static final int thinClients = 10;
	
	public static void main(String[] args){
		//Start server
		ExecutorService servEx = Executors.newSingleThreadExecutor();
		servEx.submit(new ServerModel(PORT, MAX_CONNECTIONS));
		
		//Make some clients
		ExecutorService clientEx = Executors.newFixedThreadPool(2);
		for(int i = 0; i < thinClients; i++){
			clientEx.submit(new Client("TESTER " + i, PORT));
		}
		
		//Proper shutdown
		clientEx.shutdown();
		while(!servEx.isShutdown()) { }
		servEx.shutdown();
	}

}
